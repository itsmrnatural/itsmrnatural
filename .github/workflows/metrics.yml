name: Metrics

on:
    schedule:
        - cron: "0 0 * * *" # Daily at midnight UTC
    workflow_dispatch: # Manual trigger
    push:
        branches: ["main"]

jobs:
    github-metrics:
        runs-on: ubuntu-latest
        permissions:
            contents: write

        steps:
            - uses: lowlighter/metrics@latest
              with:
                  token: ${{ secrets.METRICS_TOKEN }}

                  # Core Configuration
                  user: itsmrnatural
                  template: terminal 
                  base: header, activity, community
                  config_timezone: Asia/Kolkata
                  config_display: regular
                  config_padding: 0, 8

                  # Languages Statistics (Clean & Focused)
                  plugin_languages: yes
                  plugin_languages_analysis_timeout: 15
                  plugin_languages_categories: markup, programming
                  plugin_languages_colors: github
                  plugin_languages_limit: 6
                  plugin_languages_recent_categories: markup, programming
                  plugin_languages_recent_days: 14
                  plugin_languages_recent_load: 300
                  plugin_languages_sections: most-used
                  plugin_languages_threshold: 0%
                  plugin_languages_details: percentage

                  # Notable Contributions
                  plugin_notable: yes
                  plugin_notable_from: all
                  plugin_notable_types: commit
                  plugin_notable_repositories: yes

                  # Code Habits (Minimal)
                  plugin_habits: yes
                  plugin_habits_from: 200
                  plugin_habits_days: 14
                  plugin_habits_facts: yes
                  plugin_habits_charts: yes
                  plugin_habits_charts_type: classic
                  plugin_habits_trim: yes

                  # Recent Activity (Compact)
                  plugin_activity: yes
                  plugin_activity_limit: 3
                  plugin_activity_load: 300
                  plugin_activity_days: 14
                  plugin_activity_visibility: public
                  plugin_activity_filter: all
                  plugin_activity_timestamps: yes

                  # Music (Last.fm Integration)
                  plugin_music: yes
                  plugin_music_provider: lastfm
                  plugin_music_mode: recent
                  plugin_music_user: itsmrnatural
                  plugin_music_token: ${{ secrets.LASTFM_KEY }}
                  plugin_music_limit: 4
                  plugin_music_played_at: yes
